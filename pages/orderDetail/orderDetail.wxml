<view class="container" wx:if="{{order}}">
  <view class="order-card">
    <view class="order-header">
      <text class="device">设备：{{order.device}}</text>
      <text class="status">状态：{{statusText}}</text>
    </view>

    <view class="order-body">
      <text>问题：{{order.issue}}</text>
      <text>客户：{{order.customer}}</text>
      <text>电话：{{order.phone || '未填写'}}</text>
      <text>地址：{{order.address || '未填写'}}</text>
    </view>

    <!-- 图片展示 -->
    <view wx:if="{{order.images && order.images.length > 0}}" class="order-images">
      <block wx:for="{{order.images}}" wx:key="*this">
        <image src="{{item}}" mode="aspectFill" class="order-img" />
      </block>
    </view>
  </view>

  <!-- 客户端：去评价按钮 -->
  <button wx:if="{{role==='customer' && order.status==='done'}}" 
          type="primary" 
          bindtap="goReview">去评价</button>

  <!-- 师傅端：只有接单后才显示完成按钮 -->
  <button wx:if="{{role==='technician' && order.status==='assigned' && order.technicianId===userId}}" 
          type="primary" 
          bindtap="markCompleted">标记完成</button>
</view>
